@{
    ViewData["Title"] = "訂單管理";
}

<!-- 麵包屑 -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb breadcrumb-chevron p-3">
        <li class="breadcrumb-item">
            <a class="link-body-emphasis text-decoration-none" href="/Home/">
                <i class="bi bi-house-fill"></i>
                <span class="breadcrumb-item">首頁</span>
            </a>
        </li>
        <li class="breadcrumb-item">
            <a class="link-body-emphasis fw-semibold text-decoration-none" href="/Backstage/Index">後台</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            訂單管理
        </li>
    </ol>
</nav>


<h1 class="qtxt"><center>訂單管理</center></h1>

<hr class="qhr" />

<div class="row d-flex justify-content-center align-items-center mb-4">
    <!-- 搜尋欄 -->
</div>

@{
    List<string> categories = new List<string> { "今日訂單", "待確認", "待出貨", "已出貨", "已到貨" };
    List<List<OrderDetailViewModel>> orderData = new List<List<OrderDetailViewModel>>();
    orderData.Add(ViewBag.today);
    orderData.Add(ViewBag.uncheck);
    orderData.Add(ViewBag.check);
    orderData.Add(ViewBag.ship);
    orderData.Add(ViewBag.arrive);
}

@for (int i = 0; i < categories.Count; i++)
{
    <div class="row bg-white shadow-sm mt-3 p-3 accordion accordion-flush">
        <div class="d-flex align-items-center">
            <h3 class="qtxt"><center>@categories[i]</center></h3>
            <div class="text-bg-dark p-1 rounded-circle">@orderData[i].Count</div>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>訂單編號</th>
                    <th>訂單日期</th>
                    <th>訂單狀態</th>
                    <th>交易狀態</th>
                    <th>訂單總金額</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in orderData[i])
                {
                    <tr>
                        <td>@item.OrderId</td>
                        <td>@item.Orderdate</td>
                        <td>@item.Status</td>
                        @if (@item.PaymentDate == DateTime.MinValue)
                        {
                            <td class="col-3">未付款</td>
                        }
                        else
                        {
                            <td class="col-3">已付款</td>
                        }
                        <td>NT @item.TotalPrice</td>
                        <td><a class="btn btn-danger" href="ViewOrder/@item.OrderId">預覽訂單</a></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

@section topCSS
    {
    <style>
        .qhr {
            border: 3px solid;
            color: #641E16;
        }

        .qtxt {
            color: #6C5C53;
            font-weight: bolder;
        }

        .searchbtn {
            width: 100px;
            height: 40px;
            border-radius: 10px;
            font-weight: bold;
            background-color: #6C5C53 !important;
            color: white;
            border-color: transparent;
        }
    </style>
}
